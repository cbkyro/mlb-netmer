<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>        
<script src="{{cdn 'js/bootstrap.min.js'}}"></script>
{{{stylesheet 'assets/css/protect.css'}}}

<script type="text/javascript">
    $(function () {
        // $('#login-modal').modal({
        //     show: true;
        //     keyboard: false,
        //     backdrop: 'static'
        // });
        
        // ASCII Enter key submits same form as clicking button
        $('.input').keypress(function (e) {
            if (e.which == 13) {
                $('.loginmodal-submit').click();
                return false;    //<---- Add this line
            }
        });
    });    
</script>

<div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div id="modal-logo">
        {{#if settings.store_logo.image}}
            <img class="header-logo-image" src="{{getImage settings.store_logo.image 'logo_size'}}" alt="{{settings.store_logo.title}}" title="{{settings.store_logo.title}}">
        {{else}}
            <span class="header-logo-text">{{settings.store_logo.title}}</span>
        {{/if}}
    </div>
    
    <div class="modal-dialog">
        <div class="loginmodal-container">
            <h1 type="text" name="password2" size="15">Enter Password</h1><br>
        <form name="password1" id="password1">
            <input type="password" class="input" name="password2" placeholder="Password" size="15">
            <input type="button" class="login loginmodal-submit" value="Enter Store" onClick="submitentry()">
        </form>

        <!-- JS Encrypt -->
        <!-- http://www.javascriptkit.com/epassword/index.htm -->
        <script>
            
            // Encrypted pw
            var pass=new Array()
            var t3=""
            var lim=9
            pass[0]="Fd4OlgpekuUcef2"
            pass[1]="hTTM2vtlG7KOT4L"
            pass[2]="lUXK0jD15hktpyN"
            pass[3]="jnDUOCjjCBmQcH"
            pass[4]="9ouNouwh6lKBjE02"
            pass[5]="23ouNouwh6lKBjE0"
            var overflow = "HLN"

            //configure extension to reflect the extension type of the target web page (ie: .htm or .html)
            // var extension = ".html"
            var extension = "/"
            var enablelocking = 0
            var numletter = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
            var temp3 = ''
            var cur = 0


            function max(which) {
                return (pass[Math.ceil(which) + (3 & 15)].substring(0, 1))
            }

            function testit(input) {
                temp = numletter.indexOf(input)
                var temp2 = temp ^ parseInt(pass[phase1 - 1 + (1 | 3)].substring(0, 2))
                temp2 = numletter.substring(temp2, temp2 + 1)
                return (temp2)
            }


            function submitentry() {
                t3 = ''
                verification = document.password1.password2.value + overflow
                phase1 = Math.ceil(Math.random()) - 6 + (2 << 2)
                var indicate = true
                for (i = (1 & 2); i < window.max(Math.LOG10E); i++)
                    t3 += testit(verification.charAt(i))
                for (i = (1 & 2); i < lim; i++) {
                    if (t3.charAt(i) != pass[phase1 + Math.round(Math.sin(Math.PI / 2) - 1)].charAt(i))
                        indicate = false
                }
                // if (verification.length != window.max(Math.LOG10E)) //Disabled when pw exceed 9 characters
                //     indicate = false
                if (indicate)
                    $.cookie('visited', 'visited', { expires: 1, path: '/' }),
                    // window.location = verification + extension
                    window.location.href = "/"; //Redirect to home
                else
                    alert("Invalid password. Please try again")
            }

        </script>
            
        <div class="login-help">
            <a href="">Where can I find my password?</a>
        </div>
        </div>
</div>

    </div>

<!-- <a href="#" data-toggle="modal" data-target="#login-modal" style="position: absolute; z-index: 9999;">Login</a> -->

<!-- Created by Aether Pro -->